{"version":3,"sources":["../../../src/setup/server/start.js"],"names":["server","console","info","serverProcess","listen","PORT","error","NODE_ENV","ip","address","Date","signal","process","on","close","mongoose","connection","exit"],"mappings":";;;;;;;;;AACA;;AACA;;AAGA;;AALA;AAIA;AAGA;AACe,kBAAUA,MAAV,EAAkB;AAC/BC,EAAAA,OAAO,CAACC,IAAR,CAAa,2BAAb;AAEA,MAAMC,aAAa,GAAGH,MAAM,CAACI,MAAP,CAAcC,SAAd,EAAoB,UAACC,KAAD,EAAW;AACnD,QAAIA,KAAJ,EAAW;AACTL,MAAAA,OAAO,CAACK,KAAR,CAAc,iCAAd;AACD,KAFD,MAEO;AACLL,MAAAA,OAAO,CAACC,IAAR;AACAD,MAAAA,OAAO,CAACC,IAAR,sCAA4CG,SAA5C,eAAuDE,aAAvD;AACAN,MAAAA,OAAO,CAACC,IAAR,4BAAkCM,eAAGC,OAAH,EAAlC,cAAoDJ,SAApD,eAA+DE,aAA/D;AACAN,MAAAA,OAAO,CAACC,IAAR,sBAA4B,IAAIQ,IAAJ,EAA5B;AACD;AACF,GATqB,CAAtB,CAH+B,CAc/B;;AACA,0BAAkB,CAAC,QAAD,EAAW,SAAX,CAAlB,0BAAyC;AAArC,QAAIC,MAAM,WAAV;AACFC,IAAAA,OAAO,CAACC,EAAR,CAAWF,MAAX,EAAmB,YAAY;AAC7BV,MAAAA,OAAO,CAACC,IAAR,CAAa,+BAAb;AAEAC,MAAAA,aAAa,CAACW,KAAd,CAAoB,YAAY;AAC9Bb,QAAAA,OAAO,CAACC,IAAR,CAAa,mCAAb;;AAEAa,6BAASC,UAAT,CAAoBF,KAApB,CAA0B,KAA1B,EAAiC,YAAM;AACrCb,UAAAA,OAAO,CAACC,IAAR,CAAa,+BAAb;AAEAU,UAAAA,OAAO,CAACK,IAAR,CAAa,CAAb;AACD,SAJD;AAKD,OARD;AASD,KAZD;AAaD;AACF","sourcesContent":["// Imports\r\nimport ip from 'ip'\r\nimport mongoose from 'mongoose'\r\n\r\n// App Imports\r\nimport { PORT, NODE_ENV } from '../config/env'\r\n\r\n// Start server\r\nexport default function (server) {\r\n  console.info('SETUP - Starting server..')\r\n\r\n  const serverProcess = server.listen(PORT, (error) => {\r\n    if (error) {\r\n      console.error('ERROR - Unable to start server.')\r\n    } else {\r\n      console.info(`INFO - Server started on`)\r\n      console.info(`  Local   http://localhost:${ PORT } [${ NODE_ENV }]`)\r\n      console.info(`  Network http://${ ip.address() }:${ PORT } [${ NODE_ENV }]`)\r\n      console.info(`  Datetime ${ new Date() }\\n`)\r\n    }\r\n  })\r\n\r\n  // Stop Server\r\n  for(let signal of ['SIGINT', 'SIGTERM']) {\r\n    process.on(signal, function () {\r\n      console.info('INFO - Shutting down server..')\r\n\r\n      serverProcess.close(function () {\r\n        console.info('INFO - Server has been shut down.')\r\n\r\n        mongoose.connection.close(false, () => {\r\n          console.info('INFO - Database disconnected.')\r\n\r\n          process.exit(0)\r\n        })\r\n      })\r\n    })\r\n  }\r\n}\r\n"],"file":"start.js"}